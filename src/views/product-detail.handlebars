<h1>{{product.name}}</h1>

<p><strong>Descripción:</strong> {{product.description}}</p>
<p><strong>Precio:</strong> ${{product.price}}</p>
<p><strong>Stock:</strong> {{product.stock}}</p>

<button onclick="addToCart('{{product._id}}')">
    Agregar al carrito
</button>

<br><br>
<a href="/products?cart={{cartId}}">⬅ Volver</a>

<script>
async function addToCart(productId) {
    try {
        const cartId = "{{cartId}}";

        const response = await fetch(`/api/carts/${cartId}/products/${productId}`, {
            method: "POST"
        });

        if (!response.ok) throw new Error();

        alert("Producto agregado al carrito");

    } catch (error) {
        alert("Error al agregar producto");
    }
}
</script>