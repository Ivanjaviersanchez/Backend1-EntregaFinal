<h1>{{product.name}}</h1>

<p><strong>Descripción:</strong> {{product.description}}</p>
<p><strong>Precio:</strong> ${{product.price}}</p>
<p><strong>Stock:</strong> {{product.stock}}</p>

<button onclick="addToCart('{{product._id}}')">
    Agregar al carrito
</button>

<br><br>
<a href="/products">⬅ Volver</a>

<script>
    async function addToCart(productId) {
        try {
            const cartId = "69a0ebe61d28490fdeb15620"; // ← reemplazar por tu id

            const response = await fetch(`/api/carts/${cartId}/products/${productId}`, {
                method: "POST"
            });

            if (!response.ok) {
                throw new Error("No se pudo agregar el producto");
            }

            alert("Producto agregado al carrito");

        } catch (error) {
            console.error(error);
            alert("Error al agregar producto");
        }
    }
</script>